// script.js

// Knowledge base with Arabic and English support
const prompts = [
    ["a small", "my box"], //1
    ["b small", "personal feast"], //2
    ["c small", "my box extra"], //3
    ["d small", "summer solo meal"], //4
    ["a med", "couple feast"], //5
    ["b med", "medium feast"], //6
    ["a two med", "triple treat box"], //7
    ["b two med", "friends feast"], //8
    ["c two med", "medium double feast"], //9
    ["d two med", "big box"], //10
    ["e two med", "double summer meal"], //11
    ["a three med", "party box"], //12
    ["b three med", "triple deal"], //13
    ["a six med", "gathering meal"], //14
    ["a large", "varity feast"], //15
    ["a two large", "super triple treat box"], //16
    ["b two large", "large double feast"], //17
    ["lemo", "limo", "super limo", "super lemo"], //18
    ["bogo small", "bogo s"], //19
    ["bogo med", "bogo m"], //20
    ["bogo large", "bogo l"], //21
    ["sup sup", "super supreme"], //22
    ["class pep", "classic pepperoni"], //23
    ["hot s beef", "hot stuff beef"], //24
    ["chk sup", "chicken supreme"], //25
    ["chk chk", "cheeky chicken"], //26
    ["hot s chk", "hot stuff chicken"], //27
    ["sp chk rench", "spicy chicken ranch"], //28
    ["tabasco", "tobasco"], //29
    ["go pep chk", "chicken ghost pepper", "ghost pepper chicken"], //30
    ["v v", "very veggie"], //31
    ["go pep v", "viggie ghost pepper", "ghost pepper viggie"], //32
    ["marg", "margarita"], //33
    ["trop", "tropical hawaiian", "tropical", "hawaiian"], //34
    ["ch pizza", "cheese pizza", "ch p"], //35
    ["pep pizza", "pepperoni pizza", "p p"], //36
    ["chk tenders", "chicken tenderloins", "chk kids"], //37
    ["hut", "reward", "hut reward"], //38
];

const replies = [
    // Personal meals and small pizza offers
    [
        "ูุงู ุจููุณ \n\
        ***************************************\n\
        ุจูุชุฒุง ูุณุชุทููุฉ ููุณูุฉ ุงูู 6 ูุทุน (ุณูููุฉ ุงู ุณุงู ูุฑุงูุณูุณูู) ๐ \n\
        ูุน ุงููุงููุฉ ุงุฎุชูุงุฑ ููุจููู ูู ุงุตู 6 ููุจูุงุช ๐๐ง๐ช๐ \n\
        "
    ], //1

    [
        "ุงููุฌุจุฉ ุงูุดุฎุตูุฉ ๐จโ๐ณ \n\
        ***************************************\n\
        ุจูุชุฒุง ุญุฌู ุตุบูุฑ ๐ \n\
        ุจุทุงุท ููุฏุฌูุฒ ุตุบูุฑ ๐ \n\
        ูุดุฑูุจ ๐บ \n\
        "
    ], //2

    [
        "ูุงู ุจููุณ ุงูุณุชุฑุง \n\
        ***************************************\n\
        ููุณ ุนุฑุถ ูุงู ุจููุณ ููุฑุฑ 4 ูุฑุงุช ุจุณุนุฑ ุงูู (ุชูููุฑ 800 ููุณ)"
    ], //3

    [
        "ุณููู ุณูุฑ ูููู \n\
        ๐จ๐จ๐จ ูู ุญุงูุฉ ุณุคุงู ุงูุนููู ููุท ๐จ๐จ๐จ \n\
        ***************************************\n\
        ุจูุชุฒุง ุญุฌู ุตุบูุฑ ๐ \n\
        ุจุทุงุท ููุฏุฌูุฒ ุตุบูุฑ ๐ \n\
        ุงูุณ ูุฑูู ูุงุฌูู ูููู ูุจ ๐ง "
    ], //4

    // Medium pizza offers
    [
        "ุงููุงุจู ููุณุช ๐ \n\
        ***************************************\n\
        ุจูุชุฒุง ูุณุท ๐ \n\
        ุณูุทุฉ ุญุฌู ุตุบูุฑ ๐ฅ \n\
        ุงุฑุจุน ูุทุน ุฎุจุฒ ุจุงูุซูู ๐๐๐๐ \n\
        ุงุชููู ูุดุฑูุจ ๐บ๐บ "
    ], //5

    [
        "ุงูููุฏูู ููุณุช ๐ฝ \n\
        ***************************************\n\
        ุจูุชุฒุง ูุณุท ๐ \n\
        ุจุทุงุท ุญุฌู ุตุบูุฑ ๐ \n\
        ุนุฏุฏ 4 ูุทุน ุฌูุงูุญ ูููุฌ ุณุชุฑูุช ุจุฏูู ุนุถู ๐ "
    ], //6

    // 2 Medium pizzas offers
    [
        "ุงูุชุฑูุจู ุชุฑูุช ุจููุณ \n\
        ***************************************\n\
        ุนุฏุฏ 2 ุจูุชุฒุง ูุณุท ๐ \n\
        ุนุฏุฏ 2 ุตูุต ุฌุงูุจู ๐ \n\
        ุจุทุงุท ููุฏุฌูุฒ ุญุฌู ุตุบูุฑ ๐\n\
        ุญููู ุงูุฏุจู ููุฑุดูุฒ ููููุฒ ๐ช \n\
        ุนุฏุฏ 8 ูุทุน ุฌูุงูุญ ูููุฌ ุณุชุฑูุช ุจุฏูู ุนุธู ๐ \n\
        ุนุฏุฏ 5 ูุดุฑูุจ ๐บ๐บ "
    ], //7

    [
        "ูุฌุจุฉ ุงูุงุตุฏูุงุก \n\
        ***************************************\n\
        ุนุฏุฏ 2 ุจูุชุฒุง ูุณุท ๐ \n\
        ุจุทุงุท ููุฏุฌูุฒ ุญุฌู ุตุบูุฑ ๐\n\
        ุนุฏุฏ 4 ูุทุน ุฌูุงูุญ ูููุฌ ุณุชุฑูุช ุจุฏูู ุนุธู ๐"
    ], //8

    [
        "ุงูููุฏูู ุฏุจู ููุณุช \n\
        ***************************************\n\
        ุนุฏุฏ 2 ุจูุชุฒุง ูุณุท ุจุฏูู ููุจูุงุช ๐ "
    ], //9

    [
        "ุงูุจูุฌ ุจููุณ \n\
        ๐จ๐จ๐จ ูู ุญุงูุฉ ุณุคุงู ุงูุนููู ููุท ๐จ๐จ๐จ \n\
        ***************************************\n\
        ุนุฏุฏ 2 ุจูุชุฒุง ูุณุท ูุงุญุฏุฉ ูููู ุจุชููู ุงูุนุฌููุฉ ุงูุฌุฏูุฏุฉ ุงุทุฑุงู ุงููุจุงุจ ุงู ุงุทุฑุงู ุงูุฌุจูุฉ ุจุฒุจุฏุฉ ุจุงูุซูู ๐\n\
        ุจุทุงุท ููุฏุฌูุฒ ุญุฌู ุตุบูุฑ ๐ \n\
        ุนุฏุฏ 3 ูุทุน ุฎุจุฒ ุจุงูุซูู ูุน ุฌุจูุฉ ๐ \n\
        ุนุฏุฏ 6 ูุทุน ุฏุฌุงุฌ ูููุฌ ุณุชุฑูุช ุจุฏูู ุนุธู ๐ \n\
        ุตูุต ุฌุงูุจู ๐ \n\
        ู ูููู ุงู2 ุจูุชุฒุง ูููููุง ุงูุนุฌููุฉ ุงูุฌุฏูุฏุฉ ุจุฒูุงุฏุฉ 600 ููุณ ุจุณ"
    ], //10

    [
        "ุงูุฏุจู ุณูุฑ ูููู\n\
        ๐จ๐จ๐จ ูู ุญุงูุฉ ุณุคุงู ุงูุนููู ููุท ๐จ๐จ๐จ \n\
        ***************************************\n\
        ุนุฏุฏ 2 ุจูุชุฒุง ูุณุท ๐ \n\
        ุงูุณ ูุฑูู ูุงุฌูู ูููู ุณุชููุณ ๐ง"
    ], //11

    // 3 Medium pizzas offers
    [
        "ุงูุจุงุฑุชู ุจููุณ \n\
        ***************************************\n\
        ุนุฏุฏ 3 ุจูุชุฒุง ูุณุท ๐ \n\
        ุจุทุงุท ููุฏุฌูุฒ ุญุฌู ูุจูุฑ ๐\n\
        ุนุฏุฏ 6 ูุทุน ุฎุจุฒ ุจุงูุซูู ๐\n\
        ูุดุฑูุจ ุจูุจุณู ุนุงุฆูู ๐บ"
    ], //12

    [
        "ุงูุชุฑูุจู ุฏููู \n\
        ๐จ๐จ๐จ ูู ุญุงูุฉ ุณุคุงู ุงูุนููู ุนู 3 ุจูุชุฒุง ูุณุท ุจุฏูู ููุจูุงุช ๐จ๐จ๐จ \n\
        ***************************************\n\
        ุนุฏุฏ 3 ุจูุชุฒุง ูุณุท ุจุฏูู ููุจูุงุช ๐"
    ], //13

    // 6 Pizzas offers
    [
        "ูุฌุจุฉ ุงูููุฉ\n\
        ๐จ๐จ๐จ ูู ุญุงูุฉ ุณุคุงู ุงูุนููู ู ูุชุงุญ ููุท ุชูุตูู ๐จ๐จ๐จ \n\
        ๐จ๐จ๐จ ุบูุฑ ูุชุงุญ ุงูุชุนุฏูู ุนูู ุญุฌู ุงูุจูุชุฒุง ุงู ููุนูุง ุงู ููุน ุงูุนุฌููุฉ ๐จ๐จ๐จ \n\
        ***************************************\n\
        ุนุฏุฏ 6 ุจูุชุฒุง ูุณุท ูููู ูุญู ุงู 2 ูุญู ู 2 ุฏุฌุงุฌ ู 2 ุฌุจูุฉ ู ุฎุถุงุฑ ๐\n\
        ุงููุญู ูุงูุงุชู:\n\
        ุนุฏุฏ 2 ุจูุชุฒุง ุณุงู ูุฑุงูุณูุณูู ูุงุญุฏุฉ ููุงุณูู ุจูุจุฑููู ู ุงูุชุงููุฉ ุณุจุงูุณู ุชุดููู ุฑุงูุด \n\
        ุนุฏุฏ 2 ุจุงู ูุงุญุฏุฉ ุณูุจุฑ ุณูุจุฑูู ู ุงูุชุงููุฉ ููุงุณูู ุจูุจุฑููู \n\
        ุนุฏุฏ 2 ุงุทุฑุงู ุฌุจู ูุงุญุฏุฉ ุณูุจุฑ ุณูุจุฑูู ู ุงูุชุงููุฉ ุฌุฑููุฏ ุชุดููู ุชุดููู \n\
        ู ุงูุฏุฌุงุฌ ูุงูุงุชู: \n\
        ุนุฏุฏ 2 ุณุงู ูุฑุงูุณูุณูู ูุงุญุฏุฉ ูุงุฑุฌุฑูุชุง ู ุงูุชุงููุฉ ุณุจุงูุณู ุชุดููู ุฑุงูุด \n\
        ุนุฏุฏ 2 ุจุงู ูุงุญุฏุฉ ุงูุฎุถุงุฑ ููุท (Very Veggie) ู ุงูุชุงููุฉ ููุงุณูู ุจูุจุฑููู \n\
        ุนุฏุฏ 2 ุงุทุฑุงู ุฌุจู ูุงุญุฏุฉ ุณูุจุฑ ุณูุจุฑูู ู ุงูุชุงููุฉ ุฌุฑููุฏ ุชุดููู ุชุดููู "
    ], //14

    [
        "ุงููุงุฑุงูุชู ููุณุช \n\
        ***************************************\n\
        ุจูุชุฒุง ุญุฌู ูุจูุฑ ๐\n\
        ุชุฑูู ุจูุงุชุฑ ุจุฏุงุฎูู :\n\
        ุนุฏุฏ 6 ูุทุน ุฏุฌุงุฌ ูููุฌ ุณุชุฑูุช ุจุฏูู ุนุถู ๐\n\
        ุนุฏุฏ 4 ูุทุน ุฎุจุฒ ุจุงูุซูู ๐\n\
        ุจุทุงุท ููุฏุฌูุฒ ุญุฌู ุตุบูุฑ ๐\n\
        ู 4 ูุดุฑูุจุงุช ๐บ๐บ๐บ๐บ "
    ], //15

    [
        "ุณูุจุฑ ุชุฑูุจู ุชุฑูุช ุจููุณ \n\
        ***************************************\n\
        ุนุฏุฏ 2 ุจูุชุฒุง ุญุฌู ูุจูุฑ ๐ \n\
        ุนุฏุฏ 2 ุตูุต ุฌุงูุจู ๐ \n\
        ุจุทุงุท ููุฏุฌูุฒ ุญุฌู ูุจูุฑ ๐\n\
        ุนุฏุฏ 6 ูุทุน ุฌูุงูุญ ูููุฌ ุณุชุฑูุช ุจุฏูู ุนุธู ๐ \n\
        ุญููู ุงูุฏุจู ููุฑุดูุฒ ููููุฒ ๐ช \n\
        ุนุฏุฏ 8 ูุดุฑูุจ ๐บ๐บ๐บ๐บ๐บ๐บ๐บ๐บ "
    ], //16

    [
        "ุงููุงุฌูู ุฏุจู ููุณุช \n\
        ***************************************\n\
        ุนุฏุฏ 2 ุจูุชุฒุง ุญุฌู ูุจูุฑ ๐ \n\
        ุนุฏุฏ 2 ุตูุต ุฌุงูุจู ๐ \n\
        ุจุทุงุท ููุฏุฌูุฒ ุญุฌู ูุจูุฑ ๐\n\
        ุนุฏุฏ 4 ูุทุน ุฎุจุฒ ุจุงูุซูู ๐ \n\
        ุนุฏุฏ 8 ูุทุน ุฌูุงูุญ ูููุฌ ุณุชุฑูุช ุจุฏูู ุนุธู ๐"
    ], //17

    // Special pizzas
    [
        "ุณูุจุฑ ูููู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุงูุญุฌู ุงููุจูุฑ ุจุฌูุงุจ ูุญุดูุฉ ุจุงูุญุดูุฉ ุงูุฎุงุตุฉ ุจูุง ๐"
    ], //18

    [
        "ุจูุบู ุณูุงู \n\
        ***************************************\n\
        ุจูุชุฒุง ุญุฌู ุตุบูุฑ ๐"
    ], //19

    [
        "ุจูุบู ููุฏ \n\
        ***************************************\n\
        ุจูุชุฒุง ุญุฌู ูุชูุณุท ๐"
    ], //20

    [
        "ุจูุบู ูุงุฑุฌ \n\
        ***************************************\n\
        ุจูุชุฒุง ุญุฌู ูุจูุฑ ๐"
    ], //21

    [
        "ุณูุจุฑ ุณูุจุฑูู \n\
        ***************************************\n\
        ุจูุชุฒุง ุณูุจุฑูู ุจุงููุจูุฑ ๐"
    ], //22

    [
        "ููุงุณูู ุจูุจุฑููู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุจุญุดูุฉ ุจูุจุฑููู ุงูุฎุงุตุฉ ๐"
    ], //23

    [
        "ููุช ุณุชุงู ุจูู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุจุญุดูุฉ ุญุงุฑุฉ ุชุญุชูู ุนูู ุงููุญู ุงูุจูุฑู ๐"
    ], //24

    [
        "ุชุดููู ุณูุจุฑูู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุจุญุดูุฉ ุฏุฌุงุฌ ูุนุฌุจ ๐"
    ], //25

    [
        "ุดููู ุชุดููู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุงูุฏุฌุงุฌ ๐"
    ], //26

    [
        "ููุช ุณุชุงู ุชุดููู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุจุญุดูุฉ ุฏุฌุงุฌ ุญุงุฑุฉ ๐"
    ], //27

    [
        "ุณุจุงูุณู ุชุดููู ุฑุงูุด ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุฏุฌุงุฌ ุญุงุฑ ๐"
    ], //28

    [
        "ุชุงุจุงุณูู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุชูุงุจู ุชุงุจุงุณูู ๐"
    ], //29

    [
        "ุฌูุณุช ุจูุจุฑ ุชุดููู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุฏุฌุงุฌ ุญุงุฑ ูุน ุชูุงุจู ุดุจุญ ุงููููู ๐"
    ], //30

    [
        "ููุฑู ููุฌู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุงูุฎุถุฑูุงุช ููุท ๐"
    ], //31

    [
        "ุฌูุณุช ุจูุจุฑ ููุฌู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุงูุฎุถุฑูุงุช ููุท ูุน ุชูุงุจู ุดุจุญ ุงููููู ๐"
    ], //32

    [
        "ูุงุฑุบุฑูุชุง ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุงูุฌุจูุฉ ููุท ๐"
    ], //33

    [
        "ุชุฑูุจููุงู ูุงูุงูุงู ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุงูุฃููุงุณ ๐"
    ], //34

    [
        "ุชุดูุฒ ุจูุชุฒุง ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุงูุฌุจูุฉ ููุท ๐"
    ], //35

    [
        "ุจูุจุฑููู ุจูุชุฒุง ๐\n\
        ***************************************\n\
        ุจูุชุฒุง ุจุญุฌู ุตุบูุฑ ุชุญุชูู ุนูู ุจูุจุฑููู ๐"
    ], //36

    [
        "ุชุดููู ุชููุฏุฑุฒ ๐\n\
        ***************************************\n\
        ุฃุฌูุญุฉ ุฏุฌุงุฌ ุชูุฏุฑ ๐"
    ], //37

    [
        "ููุช ุฑููุฑุฏ ๐\n\
        ***************************************\n\
        ููุงูุฃุช ุฒุจุงุฆู"
    ] //38
];

function getReply(prompt, lang) {
    const prompts = knowledgeBase[lang] || [];
    const repliesLang = replies[lang] || [];
    
    for (let i = 0; i < prompts.length; i++) {
        if (prompts[i].some(p => prompt.includes(p.toLowerCase()))) {
            return repliesLang[i] || "I'm sorry, I don't have a response for that.";
        }
    }
    return "I'm sorry, I don't have a response for that.";
}

// Function to get bot response
function getBotResponse(userInput) {
    const userLang = userInput.match(/[\u0600-\u06FF]/) ? 'ar' : 'en'; // Simple check for Arabic characters
    userInput = userInput.trim().toLowerCase();
    return getReply(userInput, userLang);
}

// Ensure the chat sticks to the last message
function displayMessage(message, sender) {
    const chatOutput = document.getElementById('chat-output');
    const messageElement = document.createElement('div');
    messageElement.classList.add('message', `${sender}-message`);

    const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

    messageElement.innerHTML = `<p>${message}</p><span class="timestamp">${time}</span>`;
    chatOutput.appendChild(messageElement);

    // Ensure the latest message is scrolled into view
    messageElement.scrollIntoView({ behavior: "smooth", block: "end" });
}

// Event listener for sending message
document.getElementById('send-btn').addEventListener('click', () => {
    const userInput = document.getElementById('user-input').value;
    if (userInput.trim() === "") return;

    displayMessage(userInput, 'user');

    const botResponse = getBotResponse(userInput);
    setTimeout(() => {
        displayMessage(botResponse, 'bot');
    }, 500); // simulate delay
});

// Handle Enter key press
document.getElementById('user-input').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        document.getElementById('send-btn').click();
    }
});